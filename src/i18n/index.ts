import { computed, ref, watch } from 'vue'

const STORAGE_KEY = 'festival-locale'

const messages = {
  en: {
    nav: {
      back: 'BACK',
      home: 'HOME',
      map: 'MAP',
      favorite: 'FAVORIT',
      insights: 'INSIGHTS',
      mypage: 'MYPAGE',
      guest: 'Guest',
      roles: {
        guest: 'Guest',
        user: 'User',
        admin: 'Admin',
      },
    },
    common: {
      brand: 'Festival Pulse',
      bookmark: 'Bookmark',
      bookmarked: 'Bookmarked',
      close: 'Close',
      loading: 'Loading...',
      detail: 'Detail',
      cancel: 'Cancel',
      move: 'Move',
      month: 'Month',
      selectMonth: 'Select a month',
      locationUnset: 'Location not set',
      unknown: 'Unknown',
      other: 'Other',
      optionalEmpty: 'Optional',
      copyright: 'Â© {year}, {brand}',
    },
    theme: {
      dark: 'Dark',
      light: 'Light',
    },
    auth: {
      login: {
        title: 'Log in',
        subtitle: 'Sign in to access your personalized festival page.',
        emailLabel: 'Email',
        emailPlaceholder: 'Enter your email',
        passwordLabel: 'Password',
        passwordPlaceholder: 'Enter your password',
        submitting: 'Signing in...',
        submit: 'Log in',
        newHere: 'New here?',
        createAccount: 'Create account',
        missingCredentials: 'Email and password are required.',
        failed: 'Login failed.',
      },
      signup: {
        title: 'Create an Account',
        guestLabel: 'Guest',
        nameLabel: 'Full name',
        namePlaceholder: 'e.g. Hong Gill Dong',
        emailLabel: 'Email Address',
        emailPlaceholder: 'Enter your email',
        passwordLabel: 'Password',
        passwordPlaceholder: 'Minimum 8 characters',
        confirmPasswordLabel: 'Confirm Password',
        confirmPasswordPlaceholder: 'Re-enter your password',
        phoneLabel: 'Phone Number',
        optional: '(optional)',
        phonePlaceholder: 'e.g. +82 000 000 000',
        dobLabel: 'Date of Birth',
        year: 'Year',
        month: 'Month',
        day: 'Day',
        cityLabel: 'City',
        cityPlaceholder: 'Enter your city',
        countryLabel: 'Country / Region',
        countryPlaceholder: 'Select your country',
        terms: 'I agree to the Terms of Service and Privacy Policy.',
        cancel: 'Cancel',
        submitting: 'Creating...',
        submit: 'Sign Up',
        alreadyHaveAccount: 'Already have an account?',
        signIn: 'Sign in',
        errors: {
          nameRequired: 'Full name is required.',
          missingCredentials: 'Email and password are required.',
          passwordLength: 'Password must be at least 8 characters.',
          passwordMismatch: 'Passwords do not match.',
          termsRequired: 'Please agree to the terms to continue.',
          failed: 'Sign up failed.',
        },
        countries: {
          southKorea: 'South Korea',
          japan: 'Japan',
          unitedStates: 'United States',
          unitedKingdom: 'United Kingdom',
          germany: 'Germany',
        },
      },
    },
    profile: {
      titleLabel: 'User',
      title: 'User Configuration',
      roleLabel: 'USER',
      edit: 'Edit',
      cancel: 'Cancel',
      save: 'Save',
      saving: 'Saving...',
      loading: 'Loading profile...',
      name: 'Name',
      email: 'Email Address',
      password: 'Password',
      passwordManaged: 'Managed by Firebase',
      phone: 'Phone Number',
      dob: 'Date of Birth',
      city: 'City',
      country: 'Country / Region',
      adminPage: 'Admin Page',
      deleteAccount: 'Delete Account',
      logout: 'Log out',
      adminTitle: 'Admin',
      adminSubtitle: 'Artist or Festival',
      adminTypeLabel: 'Artist or Festival',
      festivalOption: 'FESTIVAL',
      artistOption: 'ARTIST',
      festivalName: 'Festival Name',
      date: 'Date',
      yearSelect: 'Select Year',
      monthSelect: 'Select Month',
      daySelect: 'Select Day',
      location: 'Location',
      locationPlaceholder: 'City Here',
      countryPlaceholder: 'Select your country',
      ticketLink: 'Ticket Link',
      infoLink: 'Info Link',
      lineup: 'Line Up',
      lineupPlaceholder: 'ARTIST HERE',
      image: 'Image',
      openFile: 'Open File',
      artistName: 'Name',
      born: 'Born',
      cityAdmin: 'City',
      labels: 'Labels',
      labelsPlaceholder: 'Labels here',
      genres: 'Genres',
      genresPlaceholder: 'Genres',
      genreOptions: {
        electronic: 'Electronic',
        house: 'House',
        techno: 'Techno',
        hipHop: 'Hip Hop',
        pop: 'Pop',
      },
      yearsActive: 'Years Active',
      yearsActivePlaceholder: 'Select Year',
      aboutLink: 'About Link',
      linkPlaceholder: 'LINK HERE',
      close: 'Close',
      saveButton: 'Save',
      optionalTag: '(optional)',
      phonePlaceholder: 'Optional',
      cityPlaceholder: 'City Here',
      optionalEmpty: 'Optional',
      updateSuccess: 'Profile updated.',
      updateFailed: 'Update failed.',
      adminOnly: 'Admin only.',
      submissionSaved: 'Submission saved.',
      saveFailed: 'Save failed.',
      loadFailed: 'Failed to load profile.',
      deleteConfirm: 'Delete your account and all data?',
      deleteFailed: 'Delete failed.',
    },
    insights: {
      yearTotal: 'Total Festivals Held This Year',
      topCountries: 'Top 3 Countries with the Most Festivals',
      topArtists: 'Top 4 Most Frequently Appearing Artists',
      continentTrends: 'Continent Share Trends of the Year',
      topContinents: 'TOP 3 Continent',
      festivalCount: '{count} festivals',
    },
    favorites: {
      myFavoriteTitle: 'MY FAVORITE',
      artistCount: "You've liked {count} artists",
      festivalCount: "You've bookmarked {count} festivals",
      myFestivalDate: 'Your Festival Date',
      favoriteArtists: 'Favorite Artists',
      favoriteFestivals: 'Favorite Festivals',
      noFavoriteArtists: 'No bookmarked artists yet.',
      noFavoriteFestivals: 'No bookmarked festivals yet.',
    },
    firstView: {
      todayFestival: 'Today Festival',
      emptyToday: 'Letâ€™s focus on work today ðŸ’ª',
      whatFestivalHere: 'What Festival Here?',
      loadError: 'Failed to load data.',
      oops: 'OOPS :(',
      noEventsThisMonth: 'No events this month.',
      viewOtherMonths: 'View other months ðŸ‘€',
      monthPickerTitle: 'Select a month',
      monthOptions: 'Month options',
    },
    calendar: {
      moreEvents: 'More Events',
      days: ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'],
    },
    festivalDetail: {
      location: 'LOCATION',
      share: 'Share',
      shareSuccess: 'Share succeeded.',
      shareCopied: 'Link copied.',
      shareFailed: 'Share failed. Please try again.',
      linkSection: 'LINK',
      getTicket: 'Get Ticket',
      linkPage: 'LINK PAGE',
      noLink: 'No links available.',
      lineup: 'LINE UP',
      showMore: 'More',
      showLess: 'Less',
      map: 'MAP',
      mapTitle: 'Festival location map',
      mapNoInfo: 'No location info to display a map.',
      sameLocation: 'Same Location Festivals',
      noSameLocation: 'No other festivals in the same location.',
      notFound: 'Festival not found.',
    },
    artistDetail: {
      country: 'Country: {value}',
      type: 'Type: {value}',
      birth: 'Born: {value}',
      debut: 'Debut: {value}',
      career: 'Career: {years}y',
      labels: 'Labels',
      noLabels: 'No label info.',
      careerover:'Career Overview',
      share: 'Share',
      shareSuccess: 'Share succeeded.',
      shareCopied: 'Link copied.',
      shareFailed: 'Share failed. Please try again.',
      genres: 'Genres',
      aliases: 'Aliases',
      albumsSingles: 'Albums & Singles',
      topTracks: 'Top Tracks',
      links: 'Links',
      latestFestival: 'Latest Festival',
      noGenres: 'No genre info.',
      noAliases: 'No aliases available.',
      noAlbums: 'No album info.',
      noTracks: 'No track info.',
      showMore: 'More',
      showLess: 'Less',
      unknownAlbum: 'Unknown album',
      albumMeta: '{type} â€¢ {date} â€¢ {count} tracks',
      durationSeconds: '{seconds}s',
      noLinks: 'No links available.',
      noFestival: 'No festival info available.',
      notFound: 'Artist not found.',
      genreTitle: 'Genre: {name}',
      noGenreMatches: 'No other artists in this genre.',
    },
    mapExplorer: {
      title: 'MAP EXPLORER',
      filterTitle: 'Filter',
      exploreContinent: 'Explore by Continent',
      exploreGenre: 'Explore by Genre',
      exploreDate: 'Explore by Date',
      yourLocation: 'YOUR LOCATION',
      yourLocationWithContinent: '{continent}',
      locationDenied: 'LOCATION DENIED',
      selected: 'Selected: {continent}',
      tapToSelect: 'Tap a color region to select a continent',
      search: 'Search',
      filterRequired: 'Please set at least one filter to search.',
      placingMarkers: 'Placing markers based on your selected filters...',
      foundFestivals: 'Found {count} Festivals',
      exploreAgain: 'Explore Again',
      clearSelection: 'Clear selection',
      allLabel: 'ALL',
      allDates: 'All Dates',
      dateRange: 'Date Range',
      continents: {
        asia: 'ASIA',
        europe: 'EUROPE',
        northAmerica: 'NORTH AMERICA',
        southAmerica: 'SOUTH AMERICA',
        africa: 'AFRICA',
        oceania: 'OCEANIA',
        other: 'OTHER',
      },
    },
  },
  ko: {
    nav: {
      back: 'ë’¤ë¡œ',
      home: 'HOME',
      map: 'ì§€ë„',
      favorite: 'ì¦ê²¨ì°¾ê¸°',
      insights: 'ì¸ì‚¬ì´íŠ¸',
      mypage: 'ë§ˆì´íŽ˜ì´ì§€',
      guest: 'ê²ŒìŠ¤íŠ¸',
      roles: {
        guest: 'ê²ŒìŠ¤íŠ¸',
        user: 'ìœ ì €',
        admin: 'ì–´ë“œë¯¼',
      },
    },
    common: {
      brand: 'íŽ˜ìŠ¤í‹°ë²Œ íŽ„ìŠ¤',
      bookmark: 'ë¶ë§ˆí¬',
      bookmarked: 'ë¶ë§ˆí¬ë¨',
      close: 'ë‹«ê¸°',
      loading: 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
      detail: 'ìžì„¸ížˆ',
      cancel: 'ì·¨ì†Œ',
      move: 'ì´ë™',
      month: 'ì›”',
      selectMonth: 'ì›” ì„ íƒ',
      locationUnset: 'ìœ„ì¹˜ ë¯¸ì„¤ì •',
      unknown: 'ì•Œ ìˆ˜ ì—†ìŒ',
      other: 'ê¸°íƒ€',
      optionalEmpty: 'ì„ íƒ ì•ˆ í•¨',
      copyright: 'Â© {year}, {brand}',
    },
    theme: {
      dark: 'ë‹¤í¬',
      light: 'ë¼ì´íŠ¸',
    },
    auth: {
      login: {
        title: 'ë¡œê·¸ì¸',
        subtitle: 'ë§žì¶¤ íŽ˜ìŠ¤í‹°ë²Œ íŽ˜ì´ì§€ë¥¼ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”.',
        emailLabel: 'ì´ë©”ì¼',
        emailPlaceholder: 'ì´ë©”ì¼ì„ ìž…ë ¥í•˜ì„¸ìš”',
        passwordLabel: 'ë¹„ë°€ë²ˆí˜¸',
        passwordPlaceholder: 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”',
        submitting: 'ë¡œê·¸ì¸ ì¤‘...',
        submit: 'ë¡œê·¸ì¸',
        newHere: 'ì²˜ìŒì´ì‹ ê°€ìš”?',
        createAccount: 'ê³„ì • ë§Œë“¤ê¸°',
        missingCredentials: 'ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•´ ì£¼ì„¸ìš”.',
        failed: 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      },
      signup: {
        title: 'ê³„ì • ë§Œë“¤ê¸°',
        guestLabel: 'ë¹„íšŒì›',
        nameLabel: 'ì´ë¦„',
        namePlaceholder: 'ì˜ˆ: í™ê¸¸ë™',
        emailLabel: 'ì´ë©”ì¼',
        emailPlaceholder: 'ì´ë©”ì¼ì„ ìž…ë ¥í•˜ì„¸ìš”',
        passwordLabel: 'ë¹„ë°€ë²ˆí˜¸',
        passwordPlaceholder: '8ìž ì´ìƒ',
        confirmPasswordLabel: 'ë¹„ë°€ë²ˆí˜¸ í™•ì¸',
        confirmPasswordPlaceholder: 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ìž…ë ¥í•˜ì„¸ìš”',
        phoneLabel: 'ì „í™”ë²ˆí˜¸',
        optional: '(ì„ íƒ)',
        phonePlaceholder: 'ì˜ˆ: 010-0000-0000',
        dobLabel: 'ìƒë…„ì›”ì¼',
        year: 'ì—°ë„',
        month: 'ì›”',
        day: 'ì¼',
        cityLabel: 'ë„ì‹œ',
        cityPlaceholder: 'ë„ì‹œë¥¼ ìž…ë ¥í•˜ì„¸ìš”',
        countryLabel: 'êµ­ê°€ / ì§€ì—­',
        countryPlaceholder: 'êµ­ê°€ë¥¼ ì„ íƒí•˜ì„¸ìš”',
        terms: 'ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•©ë‹ˆë‹¤.',
        cancel: 'ì·¨ì†Œ',
        submitting: 'ê°€ìž… ì¤‘...',
        submit: 'íšŒì›ê°€ìž…',
        alreadyHaveAccount: 'ì´ë¯¸ ê³„ì •ì´ ìžˆë‚˜ìš”?',
        signIn: 'ë¡œê·¸ì¸',
        errors: {
          nameRequired: 'ì´ë¦„ì„ ìž…ë ¥í•´ ì£¼ì„¸ìš”.',
          missingCredentials: 'ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•´ ì£¼ì„¸ìš”.',
          passwordLength: 'ë¹„ë°€ë²ˆí˜¸ëŠ” 8ìž ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.',
          passwordMismatch: 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',
          termsRequired: 'ì•½ê´€ì— ë™ì˜í•´ ì£¼ì„¸ìš”.',
          failed: 'íšŒì›ê°€ìž…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
        },
        countries: {
          southKorea: 'ëŒ€í•œë¯¼êµ­',
          japan: 'ì¼ë³¸',
          unitedStates: 'ë¯¸êµ­',
          unitedKingdom: 'ì˜êµ­',
          germany: 'ë…ì¼',
        },
      },
    },
    profile: {
      titleLabel: 'ì‚¬ìš©ìž',
      title: 'íšŒì› ì„¤ì •',
      roleLabel: 'íšŒì›',
      edit: 'ìˆ˜ì •',
      cancel: 'ì·¨ì†Œ',
      save: 'ì €ìž¥',
      saving: 'ì €ìž¥ ì¤‘...',
      loading: 'í”„ë¡œí•„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
      name: 'ì´ë¦„',
      email: 'ì´ë©”ì¼ ì£¼ì†Œ',
      password: 'ë¹„ë°€ë²ˆí˜¸',
      passwordManaged: 'Firebaseì—ì„œ ê´€ë¦¬ë¨',
      phone: 'ì „í™”ë²ˆí˜¸',
      dob: 'ìƒë…„ì›”ì¼',
      city: 'ë„ì‹œ',
      country: 'êµ­ê°€ / ì§€ì—­',
      adminPage: 'ê´€ë¦¬ìž íŽ˜ì´ì§€',
      deleteAccount: 'ê³„ì • ì‚­ì œ',
      logout: 'ë¡œê·¸ì•„ì›ƒ',
      adminTitle: 'ê´€ë¦¬ìž',
      adminSubtitle: 'ì•„í‹°ìŠ¤íŠ¸ ë˜ëŠ” íŽ˜ìŠ¤í‹°ë²Œ',
      adminTypeLabel: 'ì•„í‹°ìŠ¤íŠ¸ ë˜ëŠ” íŽ˜ìŠ¤í‹°ë²Œ',
      festivalOption: 'íŽ˜ìŠ¤í‹°ë²Œ',
      artistOption: 'ì•„í‹°ìŠ¤íŠ¸',
      festivalName: 'íŽ˜ìŠ¤í‹°ë²Œ ì´ë¦„',
      date: 'ë‚ ì§œ',
      yearSelect: 'ì—°ë„ ì„ íƒ',
      monthSelect: 'ì›” ì„ íƒ',
      daySelect: 'ì¼ ì„ íƒ',
      location: 'ìž¥ì†Œ',
      locationPlaceholder: 'ë„ì‹œ ìž…ë ¥',
      countryPlaceholder: 'êµ­ê°€ë¥¼ ìž…ë ¥í•˜ì„¸ìš”',
      ticketLink: 'í‹°ì¼“ ë§í¬',
      infoLink: 'ì •ë³´ ë§í¬',
      lineup: 'ë¼ì¸ì—…',
      lineupPlaceholder: 'ì•„í‹°ìŠ¤íŠ¸ ìž…ë ¥',
      image: 'ì´ë¯¸ì§€',
      openFile: 'íŒŒì¼ ì—´ê¸°',
      artistName: 'ì´ë¦„',
      born: 'ì¶œìƒ',
      cityAdmin: 'ë„ì‹œ',
      labels: 'ë ˆì´ë¸”',
      labelsPlaceholder: 'ë ˆì´ë¸” ìž…ë ¥',
      genres: 'ìž¥ë¥´',
      genresPlaceholder: 'ìž¥ë¥´ ì„ íƒ',
      genreOptions: {
        electronic: 'ì¼ë ‰íŠ¸ë¡œë‹‰',
        house: 'í•˜ìš°ìŠ¤',
        techno: 'í…Œí¬ë…¸',
        hipHop: 'íž™í•©',
        pop: 'íŒ',
      },
      yearsActive: 'í™œë™ ì—°ë„',
      yearsActivePlaceholder: 'ì—°ë„ ìž…ë ¥',
      aboutLink: 'ì†Œê°œ ë§í¬',
      linkPlaceholder: 'ë§í¬ ìž…ë ¥',
      close: 'ë‹«ê¸°',
      saveButton: 'ì €ìž¥',
      optionalTag: '(ì„ íƒ)',
      phonePlaceholder: 'ì„ íƒ ì‚¬í•­',
      cityPlaceholder: 'ë„ì‹œ ìž…ë ¥',
      optionalEmpty: 'ì„ íƒ ì•ˆ í•¨',
      updateSuccess: 'í”„ë¡œí•„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.',
      updateFailed: 'ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      adminOnly: 'ê´€ë¦¬ìžë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
      submissionSaved: 'ë“±ë¡ì´ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.',
      saveFailed: 'ì €ìž¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
      loadFailed: 'í”„ë¡œí•„ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.',
      deleteConfirm: 'ê³„ì •ê³¼ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí• ê¹Œìš”?',
      deleteFailed: 'ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
    },
    insights: {
      yearTotal: 'ì˜¬í•´ ê°œìµœëœ íŽ˜ìŠ¤í‹°ë²Œ ìˆ˜',
      topCountries: 'íŽ˜ìŠ¤í‹°ë²Œì´ ê°€ìž¥ ë§Žì€ ë‚˜ë¼ TOP 3',
      topArtists: 'ê°€ìž¥ ìžì£¼ ë“±ìž¥í•˜ëŠ” ì•„í‹°ìŠ¤íŠ¸ TOP 4',
      continentTrends: 'ì˜¬í•´ ëŒ€ë¥™ë³„ ë¹„ì¤‘ ì¶”ì´',
      topContinents: 'ìƒìœ„ 3ê°œ ëŒ€ë¥™',
      festivalCount: '{count}ê°œ',
    },
    favorites: {
      myFavoriteTitle: 'ë‚´ ì¦ê²¨ì°¾ê¸°',
      artistCount: 'ì¢‹ì•„ìš”í•œ ì•„í‹°ìŠ¤íŠ¸ {count}ëª…',
      festivalCount: 'ë¶ë§ˆí¬í•œ íŽ˜ìŠ¤í‹°ë²Œ {count}ê°œ',
      myFestivalDate: 'ë‚´ íŽ˜ìŠ¤í‹°ë²Œ ì¼ì •',
      favoriteArtists: 'ì¦ê²¨ì°¾ëŠ” ì•„í‹°ìŠ¤íŠ¸',
      favoriteFestivals: 'ì¦ê²¨ì°¾ëŠ” íŽ˜ìŠ¤í‹°ë²Œ',
      noFavoriteArtists: 'ì•„ì§ ë¶ë§ˆí¬í•œ ì•„í‹°ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.',
      noFavoriteFestivals: 'ì•„ì§ ë¶ë§ˆí¬í•œ íŽ˜ìŠ¤í‹°ë²Œì´ ì—†ìŠµë‹ˆë‹¤.',
    },
    firstView: {
      todayFestival: 'ì˜¤ëŠ˜ì˜ íŽ˜ìŠ¤í‹°ë²Œ',
      emptyToday: 'ì˜¤ëŠ˜ì€ ìž ì‹œ ì‰¬ì–´ê°€ìš” ðŸ’ª',
      whatFestivalHere: 'ì´ë‹¬ì˜ íŽ˜ìŠ¤í‹°ë²Œ',
      loadError: 'ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
      oops: 'ì´ëŸ° :(',
      noEventsThisMonth: 'ì´ë‹¬ì—ëŠ” ì¼ì •ì´ ì—†ì–´ìš”.',
      viewOtherMonths: 'ë‹¤ë¥¸ ë‹¬ ë³´ê¸° ðŸ‘€',
      monthPickerTitle: 'ì›” ì„ íƒ',
      monthOptions: 'ì›” ì„ íƒ ì˜µì…˜',
    },
    calendar: {
      moreEvents: 'ë” ë§Žì€ ì´ë²¤íŠ¸',
      days: ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '],
    },
    festivalDetail: {
      location: 'ìœ„ì¹˜',
      share: 'ë§í¬ ê³µìœ ',
      shareSuccess: 'ê³µìœ í•˜ê¸°ê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤.',
      shareCopied: 'ë§í¬ë¥¼ ë³µì‚¬í–ˆì–´ìš”.',
      shareFailed: 'ê³µìœ ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
      linkSection: 'ë§í¬',
      getTicket: 'í‹°ì¼“ ì˜ˆë§¤',
      linkPage: 'ë§í¬ íŽ˜ì´ì§€',
      noLink: 'ë“±ë¡ëœ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤.',
      lineup: 'ë¼ì¸ì—…',
      showMore: 'ë”ë³´ê¸°',
      showLess: 'ì ‘ê¸°',
      map: 'ì§€ë„',
      mapTitle: 'íŽ˜ìŠ¤í‹°ë²Œ ìœ„ì¹˜ ì§€ë„',
      mapNoInfo: 'ì§€ë„ë¥¼ í‘œì‹œí•  ìœ„ì¹˜ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.',
      sameLocation: 'ê°™ì€ ì§€ì—­ì˜ íŽ˜ìŠ¤í‹°ë²Œ',
      noSameLocation: 'ê°™ì€ ì§€ì—­ì˜ ë‹¤ë¥¸ íŽ˜ìŠ¤í‹°ë²Œì´ ì—†ìŠµë‹ˆë‹¤.',
      notFound: 'ì„ íƒí•œ íŽ˜ìŠ¤í‹°ë²Œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
    },
    artistDetail: {
      country: 'êµ­ê°€: {value}',
      type: 'ìœ í˜•: {value}',
      birth: 'ì¶œìƒ: {value}',
      debut: 'ë°ë·”: {value}',
      career: 'í™œë™: {years}ë…„',
      careerover:'í™œë™ê¸°ê°„',
      labels: 'ë ˆì´ë¸”',
      noLabels: 'ë“±ë¡ëœ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.',
      share: 'ë§í¬ ê³µìœ ',
      shareSuccess: 'ê³µìœ í•˜ê¸°ê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤.',
      shareCopied: 'ë§í¬ë¥¼ ë³µì‚¬í–ˆì–´ìš”.',
      shareFailed: 'ê³µìœ ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
      genres: 'ìž¥ë¥´',
      aliases: 'ë‹¤ë¥¸ ì´ë¦„',
      albumsSingles: 'ì•¨ë²” & ì‹±ê¸€',
      topTracks: 'ì¸ê¸° íŠ¸ëž™',
      links: 'ë§í¬',
      latestFestival: 'ìµœê·¼ íŽ˜ìŠ¤í‹°ë²Œ',
      noGenres: 'ìž¥ë¥´ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.',
      noAliases: 'ë‹¤ë¥¸ ì´ë¦„ì´ ì—†ìŠµë‹ˆë‹¤.',
      noAlbums: 'ì•¨ë²” ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.',
      noTracks: 'íŠ¸ëž™ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.',
      showMore: 'ë”ë³´ê¸°',
      showLess: 'ì ‘ê¸°',
      unknownAlbum: 'ì•Œ ìˆ˜ ì—†ëŠ” ì•¨ë²”',
      albumMeta: '{type} â€¢ {date} â€¢ {count}ê³¡',
      durationSeconds: '{seconds}ì´ˆ',
      noLinks: 'ë“±ë¡ëœ ë§í¬ê°€ ì—†ìŠµë‹ˆë‹¤.',
      noFestival: 'ì°¸ì—¬í•œ íŽ˜ìŠ¤í‹°ë²Œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.',
      notFound: 'ì„ íƒí•œ ì•„í‹°ìŠ¤íŠ¸ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
      genreTitle: 'ìž¥ë¥´: {name}',
      noGenreMatches: 'ê°™ì€ ìž¥ë¥´ì˜ ë‹¤ë¥¸ ì•„í‹°ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.',
    },
    mapExplorer: {
      title: 'MAP EXPLORER',
      filterTitle: 'í•„í„°',
      exploreContinent: 'ëŒ€ë¥™ë³„ íƒìƒ‰',
      exploreGenre: 'ìž¥ë¥´ë³„ íƒìƒ‰',
      exploreDate: 'ë‚ ì§œë³„ íƒìƒ‰',
      yourLocation: 'ë‚´ ìœ„ì¹˜',
      yourLocationWithContinent: 'ë‚´ ìœ„ì¹˜ - {continent}',
      locationDenied: 'ìœ„ì¹˜ ê¶Œí•œ ê±°ë¶€',
      selected: 'ì„ íƒë¨: {continent}',
      tapToSelect: 'ìƒ‰ìƒ ì˜ì—­ì„ íƒ­í•´ ëŒ€ë¥™ì„ ì„ íƒí•˜ì„¸ìš”',
      search: 'ê²€ìƒ‰',
      filterRequired: 'í•„í„°ë¥¼ ì„¤ì •í•´ì¤˜ì•¼ ê²€ìƒ‰ì´ ë©ë‹ˆë‹¤.',
      placingMarkers: 'ì„ íƒí•œ í•„í„° ê¸°ì¤€ìœ¼ë¡œ ë§ˆì»¤ë¥¼ ë°°ì¹˜í•˜ëŠ” ì¤‘...',
      foundFestivals: 'ì´ {count}ê°œì˜ íŽ˜ìŠ¤í‹°ë²Œ',
      exploreAgain: 'ë‹¤ì‹œ íƒìƒ‰',
      clearSelection: 'ì„ íƒ í•´ì œ',
      allLabel: 'ì „ì²´',
      allDates: 'ì „ì²´ ë‚ ì§œ',
      dateRange: 'ê¸°ê°„ ì„ íƒ',
      continents: {
        asia: 'ì•„ì‹œì•„',
        europe: 'ìœ ëŸ½',
        northAmerica: 'ë¶ì•„ë©”ë¦¬ì¹´',
        southAmerica: 'ë‚¨ì•„ë©”ë¦¬ì¹´',
        africa: 'ì•„í”„ë¦¬ì¹´',
        oceania: 'ì˜¤ì„¸ì•„ë‹ˆì•„',
        other: 'ê¸°íƒ€',
      },
    },
  },
} as const

type Locale = keyof typeof messages

const normalizeLocale = (value?: string | null): Locale => {
  if (!value) return 'en'
  const lower = value.toLowerCase()
  if (lower.startsWith('ko')) return 'ko'
  if (lower.startsWith('en')) return 'en'
  return 'en'
}

const getInitialLocale = (): Locale => {
  if (typeof window === 'undefined') return 'en'
  // Always start in English, regardless of any stored preference.
  return 'en'
}

const locale = ref<Locale>(getInitialLocale())

watch(
  locale,
  (value) => {
    if (typeof window !== 'undefined') {
      window.localStorage.setItem(STORAGE_KEY, value)
    }
    if (typeof document !== 'undefined') {
      document.documentElement.lang = value
    }
  },
  { immediate: true }
)

const resolveMessage = (key: string, target: Locale): string | undefined => {
  const parts = key.split('.')
  let node: unknown = messages[target]
  for (const part of parts) {
    if (typeof node !== 'object' || node === null) return undefined
    node = (node as Record<string, unknown>)[part]
  }
  return typeof node === 'string' ? node : undefined
}

const formatMessage = (template: string, params?: Record<string, string | number>) => {
  if (!params) return template
  return template.replace(/\{(\w+)\}/g, (match, key) =>
    params[key] === undefined ? match : String(params[key])
  )
}

const t = (key: string, params?: Record<string, string | number>) => {
  const active = locale.value
  const template =
    resolveMessage(key, active) ||
    resolveMessage(key, 'en') ||
    resolveMessage(key, 'ko')
  if (!template) return key
  return formatMessage(template, params)
}

const availableLocales = computed(() => Object.keys(messages) as Locale[])
const currentLocale = computed(() => locale.value)

const setLocale = (value: string) => {
  locale.value = normalizeLocale(value)
}

export const useI18n = () => ({
  t,
  locale,
  setLocale,
  availableLocales,
  currentLocale,
})
